
<!DOCTYPE HTML>
{%load static %}
{% load cart_tag %}
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="pragma" content="no-cache" />
<meta http-equiv="cache-control" content="max-age=604800" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, shrink-to-fit=no">

<title>OnlineStore</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/fontawesome.min.css">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css">
<!-- jQuery -->
<script src="{% static 'js/jquery-2.0.0.min.js'%} "type="text/javascript"></script>

<!-- Bootstrap4 files-->
<script src="{% static 'js/bootstrap.bundle.min.js' %}" type="text/javascript"></script>
<link href="{% static 'css/bootstrap.css' %}" rel="stylesheet" type="text/css"/>

<!-- Font awesome 5 
<link href="fonts\fontawesome\css\all.min.css" type="text/css" rel="stylesheet">
-->
<!-- custom style -->
<link href="{% static 'css/mobile.css' %}" rel="stylesheet" type="text/css"/>


<!-- custom javascript -->
<script src="{% static 'js/script.js' %}" type="text/javascript"></script>

<script type="text/javascript">
/// some script

// jquery ready start
$(document).ready(function() {
	// jQuery code

}); 
// jquery end
</script>
{% comment %} <script type="text/javascript">
        function preventBack() { window.history.forward(); }
        setTimeout("preventBack()", 0);
        window.onunload = function () { null };
    </script> {% endcomment %}

</head>
<body>


<i class="screen-overlay"></i>

<aside class="offcanvas" id="sidebar_left">
	<div class="card-body bg-primary">
		<button class="btn-close close text-white">&times;</button>
		<img src="{% static 'images/items/profileimg.jpg' %}" class="img-sm rounded-circle" alt="">
		{% if user.is_authenticated %}
		<h6 class="text-white mt-3 mb-0">Welcome {{request.user.email}}!</h6>
		{% else %}
		<h6 class="text-white mt-3 mb-0">Welcome please Login!</h6>
{% endif %}
	</div>
	<nav class="nav-sidebar">
		<a href="{% url 'home' %}"> <i class="fa fa-home"></i> Home</a>
		{% if user.is_authenticated%}
		<a href="{% url 'categories' %}"> <i class="fa fa-th"></i>	Categories</a>
		
{% endif %}
		<a class="disabled">  <i class="fa fa-info-circle"></i> About us</a>
		
		<a  class="disabled">  <i class=" fa fa-cog"></i> Settings</a>
		{% if user.is_authenticated %}
		<a href="{% url 'logout' %}"> <i class="fa fa-sign-out-alt"></i>Log Out</a>
		{% else %}
		<a href="{% url 'register_page' %}"> <i class="fa fa-sign-in-alt"></i>Register</a>
		<a href="{% url 'login_page' %}"> <i class="fa fa-sign-out-alt"></i>Log In</a>
		{% endif %}
	</nav>
	<hr>
	{% if user.is_authenticated%}
	<nav class="nav-sidebar">
		<a > <i class="fa fa-phone"></i><br> {{request.user.last_name}}</a>
		<a > <i class="fa fa-envelope"></i> <br>{{request.user.username}}</a>
		<a > <i class="fa fa-map-marker"></i><br>{{request.user.first_name}}</a>
	</nav>
	{% endif %}
</aside>

<!-- =============== screen-wrap =============== -->
<div class="screen-wrap">

<header class="app-header  bg-primary">

     <button class="btn-header" type="button" data-trigger="#sidebar_left"><i class="fa fa-bars"></i></button>
	 {% if user.is_authenticated %}
    <h5 class="title-header ml-2">OnlineStore </h5>
	<div class="header-right">  <a href="{% url 'cartpage' %}" class="btn-header"> <i class="fa fa-shopping-cart"><span id="checkout_items" class="checkout_items">{{request.session.cart|length}}</span></i> </a> </div>
	{% else %}
	<h5 class="title-header "style="margin-right:112px">OnlineStore </h5>
{% endif %}
</header> <!-- section-header.// -->


<main class="app-content">

<section class="mb-2 scroll-horizontal">
    <a class="item-slider card-banner">
        <div class="card-body bg-warning" style="height:220px; background-image: url({% static 'images/items/1.jpeg' %});"> </div>
        <div class="text-bottom"><h5 class="title">Super discount</h5></div>
    </a>
    <a  class="item-slider card-banner">
        <div class="card-body bg-warning" style="height:220px; background-image: url({% static 'images/items/2.jpeg' %});"> </div>
        <div class="text-bottom"><h5 class="title">Get offers</h5></div>
    </a>
    <a  class="item-slider card-banner">
        <div class="card-body bg-warning" style="height:220px; background-image: url({% static 'images/items/3.jpeg' %});"> </div>
        <div class="text-bottom"><h5 class="title">Best deals now</h5></div>
    </a>
	<a  class="item-slider card-banner">
        <div class="card-body bg-warning" style="height:220px; background-image: url({% static 'images/items/4.jpeg' %});"> </div>
        <div class="text-bottom"><h5 class="title">Best deals now</h5></div>
    </a>
	<a  class="item-slider card-banner">
        <div class="card-body bg-warning" style="height:220px; background-image: url({% static 'images/items/5.jpeg' %});"> </div>
        <div class="text-bottom"><h5 class="title">Best deals now</h5></div>
    </a>
</section>
 {% if user.is_authenticated %}
<section class="padding-around">
<nav class="row">
	<div class="col-6 col-sm-4">
		<a href="{% url 'categories' %}#dairy" class="btn-img overlay zoom" style="background-image: url({% static 'images/dealbanners/bgbanner3.jpg' %});">
			<span  class="text">Dairy</span>
		</a>
	</div>
	<div class="col-6 col-sm-4">
		<a href="{% url 'categories' %}#vege" class="btn-img overlay hover-zoom" style="background-image: url({% static 'images/dealbanners/bgbanner2.jpg' %});">
			<span class="text">Vegetables</span>
		</a>
	</div>
	<div class="col-6 col-sm-4">
		<a href="{% url 'categories' %}#grocery" class="btn-img overlay hover-zoom" style="background-image: url({% static 'images/dealbanners/bgbanner1.jpg' %});">
			<span class="text">Groceries</span>
		</a>
	</div>
	<div class="col-6 col-sm-4">
		<a href="{% url 'categories' %}" class="btn-img overlay" style="background-image: url({% static 'images/dealbanners/bgbannermore.jpg' %});">
			<span class="text">More</span>
		</a>
	</div>
</nav>
</section>
{% else %}
<section class="padding-around">
<ul class="row">
	<li class="col-12">
		<a href="{% url 'register_page' %}" class="btn-card-icontop btn">
			<span class="icon"> <img src="images/icons/category-blue/cpu.svg" alt="">  </span>
			<medium class="text text-center"><strong>Please Sign Up to Enjoy the services</strong> </medium>
		</a>
	</li>
</ul>
</section>
{% endif %}
<hr class="divider mb-3">

<h5 class="title-section">Our Products</h5>

<section class="scroll-horizontal padding-x">
	{% for product in data %}
	<div class="item">
		<a href="{% url 'categories' %}#{{product.category}}" class="product-sm">
			<div class="img-wrap"> <img src="data:image/png;base64,{{product.products_image}}"> </div>
			<div class="text-wrap">
				<p class="title text-truncate ">{{product.name}}</p>
				<div class="price-wrap mb-3">
					<span class="price">{{product.span_price}}/-</span> {{product.price}}/-
				</div> 
				<!-- price-wrap.// -->
			</div>
		</a>
	</div>
	{% endfor %}
	
</section>


<hr class="divider my-3">


<h5 class="title-section">Best deals</h5>
<section class="scroll-horizontal  padding-x">
	<div class="item">
		<a  class="product-sm">
			<div class="img-wrap"> <img src="{% static 'images/dealbanners/deal1.jpeg' %}"> </div>
			{% comment %} <div class="text-wrap">
				<p class="title text-truncate">Great item name</p>
				<div class="price-wrap mb-3">
					<span class="price">$23.00</span> 20.00/-
				</div> <!-- price-wrap.// -->
			</div> {% endcomment %}
		</a>
	</div>
	<div class="item">
		<a  class="product-sm">
			<div class="img-wrap"> <img src="{% static 'images/dealbanners/deal2.jpeg' %}"> </div>
			{% comment %} <div class="text-wrap">
				<p class="title text-truncate">Headset for music</p>
				<div class="price-wrap mb-3">
					<span class="price">$23.00</span> 20.00/-
				</div>  <!-- price-wrap.// -->
			</div> {% endcomment %}
		</a>
	</div>
	<div class="item">
		<a  class="product-sm">
			<div class="img-wrap"> <img src="{% static 'images/dealbanners/deal3.jpeg' %}"> </div>
			{% comment %} <div class="text-wrap">
				<p class="title text-truncate">TP link modem</p>
				<div class="price-wrap mb-3">
					<span class="price">$23.00</span> 20.00/-
				</div>  <!-- price-wrap.// -->
			</div> {% endcomment %}
		</a>
	</div>
	<div class="item">
		<a  class="product-sm">
			<div class="img-wrap"> <img src="{% static 'images/dealbanners/deal4.jpeg' %}"> </div>
			{% comment %} <div class="text-wrap">
				<p class="title text-truncate">Great product name</p>
				<div class="price-wrap mb-3">
					<span class="price">$23.00</span> 20.00/-
				</div>  <!-- price-wrap.// -->
			</div> {% endcomment %}
		</a>
	</div>
	<div class="item">
		<a  class="product-sm">
			<div class="img-wrap"> <img src="{% static 'images/dealbanners/deal5.jpeg' %}"> </div>
			{% comment %} <div class="text-wrap">
				<p class="title text-truncate">Headset for music</p>
				<div class="price-wrap mb-3">
					<span class="price">$23.00</span> 20.00/-
				</div>  <!-- price-wrap.// -->
			</div> {% endcomment %}
		</a>
	</div>
	<div class="item">
		<a  class="product-sm">
			<div class="img-wrap"> <img src="{% static 'images/dealbanners/deal6.jpeg' %}"> </div>
			{% comment %} <div class="text-wrap">
				<p class="title text-truncate">TP link modem</p>
				<div class="price">43.00</div> <!-- price-wrap.// -->
			</div> {% endcomment %}
		</a>
	</div>
	<div class="item">
		<a  class="product-sm">
			<div class="img-wrap"> <img src="{% static 'images/dealbanners/deal1.jpeg' %}"> </div>
			{% comment %} <div class="text-wrap">
				<p class="title text-truncate">Great product name</p>
				<div class="price">98.50</div> <!-- price-wrap.// -->
			</div> {% endcomment %}
		</a>
	</div>
</section> 

<hr class="divider my-3">
<section class="mb-2 scroll-horizontal">
    <a  class="item-slider card-banner">
        <div class="card-body bg-warning" style="height:220px; background-image: url({% static 'images/items/1.jpeg' %});"> </div>
        <div class="text-bottom"><h5 class="title">Super discount</h5></div>
    </a>
    <a class="item-slider card-banner">
        <div class="card-body bg-warning" style="height:220px; background-image: url({% static 'images/items/2.jpeg' %});"> </div>
        <div class="text-bottom"><h5 class="title">Get offers</h5></div>
    </a>
    <a class="item-slider card-banner">
        <div class="card-body bg-warning" style="height:220px; background-image: url({% static 'images/items/3.jpeg' %});"> </div>
        <div class="text-bottom"><h5 class="title">Best deals now</h5></div>
    </a>
	<a  class="item-slider card-banner">
        <div class="card-body bg-warning" style="height:220px; background-image: url({% static 'images/items/4.jpeg' %});"> </div>
        <div class="text-bottom"><h5 class="title">Best deals now</h5></div>
    </a>
	<a class="item-slider card-banner">
        <div class="card-body bg-warning" style="height:220px; background-image: url({% static 'images/items/5.jpeg' %});"> </div>
        <div class="text-bottom"><h5 class="title">Best deals now</h5></div>
    </a>
</section>
</main>

<nav class="nav-bottom">
	<a href=" {% url 'home' %}" class="nav-link active">
		<i class=" fa fa-home"></i><span class="text">Home</span>
	</a>
{% if user.is_authenticated %}
	<a href="{% url 'categories' %}" class="nav-link">
		<i class="icon fa fa-box"></i><span class="text">Store</span>
	</a>

	<a href="{% url 'cartpage' %}" class="nav-link">
		<i class="icon fa fa-shopping-cart"></i><span class="text">Cart</span>
	</a>
	

	<a href="{% url 'profile' %}" class="nav-link">
		<i class="icon fa fa-user"></i><span class="text">Profile</span>
	</a>
	{% endif %}
</nav> <!-- nav-bottom -->


</div> 
<!-- =============== screen-wrap end.// =============== -->

<script>
		function storePagePosition() {
			var page_y = window.pageYOffset;
			localStorage.setItem("page_y", page_y);
		}


		window.addEventListener("scroll", storePagePosition);


		var currentPageY;

		try {
			currentPageY = localStorage.getItem("page_y");

			if (currentPageY === undefined) {
				localStorage.setItem("page_y") = 0;
			}

			window.scrollTo(0, currentPageY);
		} catch (e) {
			// no localStorage available
		}
	</script>

</body>
</html>